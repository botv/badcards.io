#!/usr/bin/env node

const firebase = require('firebase-admin');
const API = require('../modules/api');
const Listing = require('../modules/listing');
const Booking = require('../modules/booking');
const Review = require('../modules/review');

// Set up Firebase
const serviceAccount = require('../service-account-key.json');

firebase.initializeApp({
    credential: firebase.credential.cert(serviceAccount),
    databaseURL: 'https://nook-e59ee.firebaseio.com'
});

// const user = new User({'id':'test'})
// API.addUser(user.serialize())


// const listing = new Listing({'uid':'AQBltzDhb0QDpakBeiijRV5CHtS2'})
// API.addListing(listing.serialize())

//const booking = new Booking({'listingId':'AQBltzDhb0QDpakBeiijRV5CHtS2-1563154383339'})
//API.addBooking(booking.serialize())

// const review = new Review({'listingId':'test-1562635404969'})
// API.addReview(review.serialize())

// API.createCustomer({source: 'tok_amex', description: 'Charge for jenny.rosen@example.com'}, 'dCVamg7ZrubxGdw52LMcCm50m0z2',
// 	(err, data) => {
// 		console.log(data.id)
// });

API.createCharge({amount: 1000, currency: 'usd', source: 'tok_visa', application_fee_amount: 300, transfer_data: {destination: 'cus_FVX5NnrPah9nHy'}, description: 'Charge for jenny.rosen@example.com'}, (err_charge, data_charge) => {
			console.log(err_charge)
			console.log(data_charge)
});




// API.retrieveCustomer('cus_FPFI1YoBLxUqtK',(err, data) => {
// 		console.log(err)
// 		console.log(data)
// });

//API.updateCustomer('dCVamg7ZrubxGdw52LMcCm50m0z2', {}, (err, data) => {
//		console.log(err)
//		console.log(data)
//});
//

// API.getBookingDates('AQBltzDhb0QDpakBeiijRV5CHtS2-1563154383339', data => {
// 	console.log(data)
// });

// API.retrieveUserCharges({}, (err, data) => {
// 	console.log(err)
// 	console.log(data)
// });

// API.retrieveCharge('ch_1EuPP8Dj3XJC2JE6VLDkmHjJ', data => {
// 	console.log(data)
// });

// API.editBooking('Q4dGcomRPVd0TzUHaIZm', {'duration':20})
// const listing =  new Listing({'type':'basement'});
// API.addListing('test',listing.serialize())
// API.getUserListings('test', data => {
// 	console.log(data)
// })
//API.addBooking('test','KOwjDmgfLmEpM6hgWLgR',{'duration':20});

// API.getPlaceDetails('ChIJV5P2Lwp644kR6F8iHVbnjm4', data =>{
// 	API.searchByLocation(data.json.results[0].address_components, 3, search => {
// 		API.orderByDistance(data, search, ordered => {
// 			console.log(ordered)
// 		});
// 	});
// });

// API.orderByDistance(['oJRE40GgMBZo3guXgS4a'], ordered => {
// 	console.log(ordered, 'order')
// });

// API.deleteBooking('gig7VfUpktdjKsp31KXV');
